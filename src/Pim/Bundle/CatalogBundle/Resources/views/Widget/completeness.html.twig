<table id="completeness-widget">
{% for channel, channelResult in widget.params %}
    <tr>
        <td><a href="#" class="toggle-channel" data-channel="{{ channel }}"><i class="icon-caret-down"/></a></td>
        <td>{{ channel }}</td>
        <td colspan="2">
            <b>{{ (channelResult.complete/(channelResult.total*channelResult.locales|length)*100)|number_format(0) }}%</b>
        </td>
    </tr>

    {% for locale, localeResult in channelResult.locales %}
    {% set ratio = (localeResult/channelResult.total*100)|number_format(0) %}
    {% if ratio == 100 %}
        {% set progressClass = 'bar-success' %}
    {% else %}
        {% set progressClass = 'bar-warning' %}
    {% endif %}
    <tr>
        <td>&nbsp;</td>
        <td style="width: 40%">{{ locale_label(locale) }}</td>
        <td>{{ ratio ~ '%' }}</td>
        <td class="progress-cell" style="width: 100%">
            <div class="progress">
                <div class="bar {{ progressClass }}" style="width: {{ ratio ~ '%' }};"></div>
            </div>
            <small>{{ localeResult ~ '/' ~ channelResult.total }}</small>
        </td>
    </tr>
    {% endfor %}
{% endfor %}
</table>
