{{ elements.backLink(path('pim_enrich_product_index', { dataLocale: dataLocale })) }}
{% if resource_granted('pim_pdf_generator_product_download') %}
    {{ elements.link('btn.to download', path('pim_pdf_generator_generate_product_pdf', { id: product.id, dataLocale: dataLocale }), { class: 'no-hash', id: 'download-btn'}) }}
{% endif %}
{{ elements.enabledSwitch(form) }}
{% if resource_granted("pim_enrich_product_remove") %}
     {{ elements.deleteLink(
        path('pim_enrich_product_remove', { id: form.vars.value.id }),
        'pim_enrich_product_remove',
        path('pim_enrich_product_index'),
        'confirmation.remove.product'|trans({ '%name%': product.label }),
        'flash.product.removed'|trans
    ) }}
{% endif %}
{{ elements.submitDropdownBtn(
    'btn.save',
    {
        'Create': { 'text': 'btn.save and create' },
        'BackGrid': { 'text': 'btn.save and back' }
    }
) }}

<script type="text/javascript">
    require(
            ['jquery', 'oro/mediator'],
            function ($, mediator) {
                var initialScope = '{{ product.scope }}',
                    url = '{{ path('pim_pdf_generator_generate_product_pdf', { id: product.id, dataLocale: dataLocale }) }}' + '&dataScope=',
                    button = $('#download-btn');

                button.attr('href', url + initialScope);
                mediator.on('scopablefield:changescope', function (scope) {
                    button.attr('href', url + scope);
                }, this);
            }
    );
</script>
